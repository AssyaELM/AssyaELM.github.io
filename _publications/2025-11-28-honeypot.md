---
title: "SSH Honeypot with Seccomp/AppArmor Confinement and ELK Monitoring "
collection: publications
category: manuscripts
permalink: /publication/honeypot
excerpt: 'This paper is about a famous math equation, $$E=mc^2$$'
date: 2025-11-28

---

## Introduction au Projet
Ce projet met en œuvre un honeypot SSH sécurisé, déployé sur Linux pour attirer et analyser en temps réel les tentatives d’attaque sur le protocole SSH. Toutes les actions des attaquants sont enregistrées, les tentatives de brute-force sont détectées automatiquement, et des alertes instantanées sont envoyées à l’administrateur via Telegram.

Pour centraliser l’analyse, les logs du honeypot sont collectés et visualisés grâce à la stack ELK (Elasticsearch, Logstash, Kibana), entièrement orchestrée sous Docker. Ce système permet ainsi de surveiller, comprendre et renforcer la sécurité face aux menaces réseau de façon efficace et moderne.

## Plan du Projet
- [1. Environnement recommandé](#1-environnement-recommandé)
- [2. Technologies utilisées](#2-technologies-utilisées)
- [3. Architecture globale](#3-architecture-globale)
- [4. Développement du Honeypot SSH](#4-développement-du-honeypot-ssh)
- [5. Sécurisation : AppArmor et Seccomp](#5-sécurisation--apparmor-et-seccomp)
- [6. Détection du Brute-Force et Alertes Telegram](#6-détection-du-brute-force-et-alertes-telegram)
- [7. Centralisation & Visualisation : Stack ELK (Docker)](#7-centralisation--visualisation--stack-elk-docker)
- [8. Défis rencontrés](#8-défis-rencontrés)
- [9. Perspectives & Conclusion](#9-perspectives--conclusion)

## Réalisation du Projet

### 1. Environnement recommandé
• Système d’exploitation dans VM : Linux, Ubuntu, Debian  
• Virtualisation : Docker + Docker Compose (version ≥ 2.20)  
• Accès système : Utilisateur avec privilèges root ou sudo  

#### Outils & Dépendances

| Composant                  | Rôle                                                      | Version recommandée      |
|----------------------------|-----------------------------------------------------------|--------------------------|
| Python 3                   | Exécution du honeypot SSH (script personnel)              | 3.8 ou supérieur         |
| Paramiko, requests, seccomp| Librairies Python pour SSH, API, sécurité                | Dernière stable          |
| Docker & Docker Compose    | Conteneurisation stack ELK                                | Dernière stable          |
| Elasticsearch + Kibana     | Stockage, visualisation des logs                          | 8.x (ELK Stack)          |
| Logstash (optionnel)       | Transformation/enrichissement des logs                    | 8.x                      |
| AppArmor                   | Confinement du processus honeypot                         | Activé par défaut        |
| libseccomp                 | Sécurité kernel avec filtre syscalls                      | ≥ 2.5.0                  |
| Bot Telegram               | Envoi d’alertes en temps réel                             | @BotFather               |

#### Matériel minimum

| Ressource          | Minimum     | Recommandé          |
|--------------------|-------------|---------------------|
| Processeur         | 1 vCPU      | 2+ vCPU             |
| RAM                | 2 Go        | 4–8 Go              |
| Stockage           | 10 Go       | 20+ Go (logs)       |
| Connexion réseau   | Publique IP fixe dédiée |                     |

#### Configuration supplémentaire
• Compte Telegram + création d’un bot avec @BotFather  
• Ports à ouvrir :  
  - 2222/tcp → accès SSH (honeypot)  
  - 5601/tcp → interface Kibana  
  - 9200/tcp → Elasticsearch (optionnel, accès local recommandé uniquement)  
• Règles de pare-feu : n’ouvrir que les ports nécessaires, bloquer tout le reste.

## 2. Technologies utilisées

#### Honeypot SSH
Un honeypot est un faux serveur déployé volontairement pour attirer les attaquants, enregistrer leurs actions, et mieux comprendre leurs techniques. Ici, il s’agit d’un serveur SSH développé en Python avec la librairie Paramiko. Il accepte toutes les connexions et simule un vrai shell pour piéger les tentatives.

#### Python et Paramiko
Python 3 est utilisé pour la rapidité de développement et la flexibilité. La librairie Paramiko permet d’implémenter le protocole SSH et de gérer toutes les étapes (authentification, capture de commandes) de façon fine et contrôlée.

#### AppArmor
AppArmor est un module de sécurité Linux qui permet de confiner les applications : il définit précisément quels fichiers et commandes le honeypot peut utiliser, et bloque tout le reste. Cela isole le système des attaques potentielles, même si l’attaquant “pense” avoir gagné un accès.

#### Seccomp
Seccomp (Secure Computing Mode) permet de filtrer et limiter les appels système réalisés par le processus Python du honeypot. Il empêche l’exécution de programmes dangereux ou tout “échappement” hors de l’environnement contrôlé.

#### Stack ELK (Elasticsearch, Logstash, Kibana)
• **Elasticsearch** : Moteur de base de données NoSQL, indexe et stocke tous les logs du honeypot pour des recherches rapides.  
• **Logstash** : Outil pour collecter, transformer et envoyer les logs, rendant leur format compatible ELK.  
• **Kibana** : Interface web pour visualiser les attaques, créer des tableaux de bord personnalisés et analyser en temps réel toutes les actions capturées.

#### Docker & Docker Compose
Permet de lancer tous les composants ELK dans des conteneurs isolés, simplifiant l’installation, la gestion et la reproduction du projet.

#### Telegram API
Utilisée pour envoyer automatiquement des alertes, en cas de détection de brute-force ou de tentative d’intrusion suspecte.

### 3. Architecture globale
<div style="text-align:center; margin: 2rem 0;">
  <a href="{{ '/files/archi.jpg' | relative_url }}" target="_blank">
    <img src="{{ '/files/archi.jpg' | relative_url }}"
         alt="Architecture globale du honeypot SSH"
         style="max-width:100%; border:1px solid #333; border-radius:8px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); cursor:zoom-in;">
  </a>
  <p><em>Architecture globale du honeypot SSH : enregistrement, analyse et alertes en temps réel</em></p>
</div>
